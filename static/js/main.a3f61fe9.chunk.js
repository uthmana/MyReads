(this.webpackJsonpMyReads=this.webpackJsonpMyReads||[]).push([[0],{27:function(e,t,o){},34:function(e,t,o){},35:function(e,t,o){"use strict";o.r(t);var n=o(1),s=o.n(n),a=o(20),c=o.n(a),r=o(22),i=o(7),l=o(9),h=o(10),b=o(13),d=o(12),u=(o(27),o(11)),j=o(0),p=function(e){Object(b.a)(o,e);var t=Object(d.a)(o);function o(){var e;Object(l.a)(this,o);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={shelf:"none"},e.changeBookShelf=function(t){e.setState({shelf:t.target.value}),e.props.onUpdateBook(e.props.book,t.target.value)},e}return Object(h.a)(o,[{key:"componentDidMount",value:function(){var e=this.props.book;e.shelf&&this.setState({shelf:e.shelf})}},{key:"render",value:function(){var e={width:128,height:192,backgroundImage:this.props.book.imageLinks?"url(".concat(this.props.book.imageLinks.thumbnail,")"):""};return Object(j.jsx)("li",{children:Object(j.jsxs)("div",{className:"book",children:[Object(j.jsxs)("div",{className:"book-top",children:[Object(j.jsx)("div",{className:"book-cover",style:e}),Object(j.jsx)("div",{className:"book-shelf-changer",children:Object(j.jsxs)("select",{onChange:this.changeBookShelf,value:this.state.shelf,children:[Object(j.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(j.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(j.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(j.jsx)("option",{value:"read",children:"Read"}),Object(j.jsx)("option",{value:"none",children:"None"})]})})]}),Object(j.jsx)("div",{className:"book-title",children:this.props.book.title}),Object(j.jsx)("div",{className:"book-authors",children:this.props.book.authors?this.props.book.authors.toString():" "})]})})}}]),o}(s.a.Component),f=function(e){Object(b.a)(o,e);var t=Object(d.a)(o);function o(){var e;Object(l.a)(this,o);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).updateBook=function(t,o){e.props.onUpdateShelf(t,o)},e}return Object(h.a)(o,[{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"list-books",children:[Object(j.jsx)("div",{className:"list-books-title",children:Object(j.jsx)("h1",{children:"MyReads"})}),Object(j.jsx)("div",{className:"list-books-content",children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"bookshelf",children:[Object(j.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(j.jsx)("div",{className:"bookshelf-books",children:Object(j.jsx)("ol",{className:"books-grid",children:this.props.books.filter((function(e){return"currentlyReading"===e.shelf})).map((function(t){return Object(j.jsx)(p,{book:t,onUpdateBook:function(t,o){return e.updateBook(t,o)}},t.id)}))})})]}),Object(j.jsxs)("div",{className:"bookshelf",children:[Object(j.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(j.jsx)("div",{className:"bookshelf-books",children:Object(j.jsx)("ol",{className:"books-grid",children:this.props.books.filter((function(e){return"wantToRead"===e.shelf})).map((function(t){return Object(j.jsx)(p,{book:t,onUpdateBook:function(t,o){return e.updateBook(t,o)}},t.id)}))})})]}),Object(j.jsxs)("div",{className:"bookshelf",children:[Object(j.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(j.jsx)("div",{className:"bookshelf-books",children:Object(j.jsx)("ol",{className:"books-grid",children:this.props.books.filter((function(e){return"read"===e.shelf})).map((function(t){return Object(j.jsx)(p,{book:t,onUpdateBook:function(t,o){return e.updateBook(t,o)}},t.id)}))})})]})]})}),Object(j.jsx)("div",{className:"open-search",children:Object(j.jsx)(u.b,{to:"/search",children:"Add a book"})})]})}}]),o}(s.a.Component),k=o(2),O="https://reactnd-books-api.udacity.com",v=localStorage.token;v||(v=localStorage.token=Math.random().toString(36).substr(-8));var x={Accept:"application/json",Authorization:v},m=function(e,t){return fetch("".concat(O,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},x),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},g=function(e){return fetch("".concat(O,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},x),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},y=function(e){Object(b.a)(o,e);var t=Object(d.a)(o);function o(){var e;Object(l.a)(this,o);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={books:[],query:"",showingBooks:[]},e.updateShelf=function(t,o){var n;n=e.state.books.findIndex((function(e){return e.id===t.id}))>0?e.state.books.map((function(e){return e.id===t.id?Object(i.a)(Object(i.a)({},t),{},{shelf:o}):e})):[].concat(Object(r.a)(e.state.books),[Object(i.a)(Object(i.a)({},t),{},{shelf:o})]),e.setState({books:n}),m(t,o).then((function(e){}))},e.updateQuery=function(t){e.setState({query:t});var o=[];t?g(t).then((function(t){t.length&&(o=t.map((function(t){var o=e.state.books.findIndex((function(e){return e.id===t.id}));return o>=0?e.state.books[o]:t}))),e.setState({showingBooks:o})})):e.setState({showingBooks:o})},e}return Object(h.a)(o,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(O,"/books"),{headers:x}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(t){e.setState({books:t})}))}},{key:"render",value:function(){var e=this,t=this.state.query;return Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)(k.a,{exact:!0,path:"/search",render:function(){return Object(j.jsxs)("div",{className:"search-books",children:[Object(j.jsxs)("div",{className:"search-books-bar",children:[Object(j.jsx)(u.b,{className:"close-search",to:"/",children:"Close"}),Object(j.jsx)("div",{className:"search-books-input-wrapper",children:Object(j.jsx)("input",{type:"text",placeholder:"Search by title or author",value:t,onChange:function(t){return e.updateQuery(t.target.value)}})})]}),Object(j.jsx)("div",{className:"search-books-results",children:Object(j.jsx)("ol",{className:"books-grid",children:e.state.showingBooks.map((function(t,o){return Object(j.jsx)(p,{book:t,onUpdateBook:function(t,o){return e.updateShelf(t,o)}},o)}))})})]})}}),Object(j.jsx)(k.a,{exact:!0,path:"/",render:function(){return Object(j.jsx)(f,{books:e.state.books,onUpdateShelf:function(t,o){return e.updateShelf(t,o)}})}})]})}}]),o}(n.Component);o(34);c.a.render(Object(j.jsx)(u.a,{children:Object(j.jsx)(y,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.a3f61fe9.chunk.js.map